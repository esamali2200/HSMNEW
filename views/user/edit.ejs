<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
  <head>
    <script src="../js/color-modes.js"></script>
    <link
      rel="stylesheet"
      href="../bootstrap-icons-1.10.5/font/bootstrap-icons.min.css"
    />
    <link rel="shortcut icon" href="../img/ali.png" type="image/x-icon">

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta
      name="author"
      content="Mark Otto, Jacob Thornton, and Bootstrap contributors"
    />
    <meta name="generator" content="Hugo 0.112.5" />
    <title>Edit Patient - Multi Step Form</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet" />

    <style>
      body {
        background-image: url('/img/Zlhospital-removebg-preview_processed.png');
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
     margin: 10;
        font-family: Arial, sans-serif;
        color: white;
      }

      .wizard-container {
        max-width: 900px;
        margin: 20px auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        color: #333;
      }

      .wizard-header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e0e0e0;
      }

      .wizard-header h2 {
        color: #2c3e50;
        margin-bottom: 10px;
      }

      .progress-container {
        margin-bottom: 30px;
      }

      .progress-steps {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        position: relative;
      }

      .progress-steps::before {
        content: '';
        position: absolute;
        top: 20px;
        left: 0;
        right: 0;
        height: 3px;
        background: #e0e0e0;
        z-index: 1;
      }

      .progress-bar-line {
        position: absolute;
        top: 20px;
        left: 0;
        height: 3px;
        background: #007bff;
        transition: width 0.3s ease;
        z-index: 2;
      }

      .step-indicator {
        position: relative;
        z-index: 3;
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
      }

      .step-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e0e0e0;
        color: #999;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-bottom: 10px;
        transition: all 0.3s ease;
        border: 3px solid #e0e0e0;
      }

      .step-indicator.active .step-circle {
        background: #007bff;
        color: white;
        border-color: #007bff;
      }

      .step-indicator.completed .step-circle {
        background: #28a745;
        color: white;
        border-color: #28a745;
      }

      .step-label {
        font-size: 12px;
        color: #666;
        text-align: center;
        font-weight: 500;
      }

      .step-indicator.active .step-label {
        color: #007bff;
        font-weight: bold;
      }

      .step-indicator.completed .step-label {
        color: #28a745;
      }

      .wizard-step {
        display: none;
        animation: fadeIn 0.3s ease;
      }

      .wizard-step.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .step-title {
        font-size: 24px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #007bff;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 8px;
      }

      .form-control, .form-select {
        border-radius: 8px;
        border: 2px solid #e0e0e0;
        padding: 10px 15px;
        transition: all 0.3s ease;
      }

      .form-control:focus, .form-select:focus {
        border-color: #007bff;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      }

      .wizard-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 2px solid #e0e0e0;
      }

      .btn-wizard {
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-wizard:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .breadcrumb-info {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 10px;
        padding: 15px 20px;
        margin: 20px auto;
        max-width: 900px;
        color: #333;
 }
 
       .bd-placeholder-img {
         font-size: 1.125rem;
         text-anchor: middle;
         -webkit-user-select: none;
         -moz-user-select: none;
         user-select: none;
       }
 
       @media (min-width: 768px) {
         .bd-placeholder-img-lg {
           font-size: 3.5rem;
         }
       }
 
       .b-example-divider {
         width: 100%;
         height: 3rem;
         background-color: rgba(0, 0, 0, 0.1);
         border: solid rgba(0, 0, 0, 0.15);
         border-width: 1px 0;
         box-shadow: inset 0 0.5em 1.5em rgba(0, 0, 0, 0.1),
           inset 0 0.125em 0.5em rgba(0, 0, 0, 0.15);
       }
 
       .b-example-vr {
         flex-shrink: 0;
         width: 1.5rem;
         height: 100vh;
       }
 
       .bi {
         vertical-align: -0.125em;
         fill: currentColor;
       }
 
       .nav-scroller {
         position: relative;
         z-index: 2;
         height: 2.75rem;
         overflow-y: hidden;
       }
 
       .nav-scroller .nav {
         display: flex;
         flex-wrap: nowrap;
         padding-bottom: 1rem;
         margin-top: -1px;
         overflow-x: auto;
         text-align: center;
         white-space: nowrap;
         -webkit-overflow-scrolling: touch;
       }
 
       .btn-bd-primary {
         --bd-violet-bg: #712cf9;
         --bd-violet-rgb: 112.520718, 44.062154, 249.437846;
 
         --bs-btn-font-weight: 600;
         --bs-btn-color: var(--bs-white);
         --bs-btn-bg: var(--bd-violet-bg);
         --bs-btn-border-color: var(--bd-violet-bg);
         --bs-btn-hover-color: var(--bs-white);
         --bs-btn-hover-bg: #6528e0;
         --bs-btn-hover-border-color: #6528e0;
         --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
         --bs-btn-active-color: var(--bs-btn-hover-color);
         --bs-btn-active-bg: #5a23c8;
         --bs-btn-active-border-color: #5a23c8;
       }
       .bd-mode-toggle {
         z-index: 1500;
       }
 </style>
    
    <link href="../css/sidebars.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/myStyle.css" />
  </head>
  <body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="check2" viewBox="0 0 16 16">
        <path
          d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"
        />
      </symbol>
      <symbol id="circle-half" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z" />
      </symbol>
      <symbol id="moon-stars-fill" viewBox="0 0 16 16">
        <path
          d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"
        />
        <path
          d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"
        />
      </symbol>
      <symbol id="sun-fill" viewBox="0 0 16 16">
        <path
          d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"
        />
      </symbol>
    </svg>

    <div
      class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle"
    >
      <button
        class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        aria-label="Toggle theme (auto)"
      >
        <svg class="bi my-1 theme-icon-active" width="1em" height="1em">
          <use href="#circle-half"></use>
        </svg>
        <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
      </button>
      <ul
        class="dropdown-menu dropdown-menu-end shadow"
        aria-labelledby="bd-theme-text"
      >
        <li>
          <button
            type="button"
            class="dropdown-item d-flex align-items-center"
            data-bs-theme-value="light"
            aria-pressed="false"
          >
            <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
              <use href="#sun-fill"></use>
            </svg>
            Light
            <svg class="bi ms-auto d-none" width="1em" height="1em">
              <use href="#check2"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            type="button"
            class="dropdown-item d-flex align-items-center"
            data-bs-theme-value="dark"
            aria-pressed="false"
          >
            <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
              <use href="#moon-stars-fill"></use>
            </svg>
            Dark
            <svg class="bi ms-auto d-none" width="1em" height="1em">
              <use href="#check2"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            type="button"
            class="dropdown-item d-flex align-items-center active"
            data-bs-theme-value="auto"
            aria-pressed="true"
          >
            <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
              <use href="#circle-half"></use>
            </svg>
            Auto
            <svg class="bi ms-auto d-none" width="1em" height="1em">
              <use href="#check2"></use>
            </svg>
          </button>
        </li>
      </ul>
    </div>

    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="home" viewBox="0 0 16 16">
        <path
          d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"
        />
      </symbol>

      <symbol id="people-circle" viewBox="0 0 16 16">
        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
        <path
          fill-rule="evenodd"
          d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
        />
      </symbol>
    </svg>

    <main class="d-flex flex-nowrap">
      <div
      id="sidebarId"
      class="position-relative d-flex flex-column flex-shrink-0 p-3 text-bg-dark sidebar"
    >
      <span style="right: 10px; top: 2px" class="position-absolute">
        <button class="btn" onclick="toggleSidebar()">
          <i class="bi bi-x-circle"></i>
        </button>
      </span>

      <a
        href="/H"
        class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"
      >
        <i class="bi bi-lightning-charge"></i>
        <span class="fs-4 sidebar-text">Sidebar</span>
      </a>
      <hr />
      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
          <a href="/H" class="nav-link text-white" aria-current="page">
            <svg class="bi pe-none me-2" width="16" height="16">
              <use xlink:href="#home" />
            </svg>
            <span class="sidebar-text"> Home </span>
          </a>
        </li>
       
        <li>
          <a href="../user/add.html" class="nav-link text-white">
            <svg class="bi pe-none me-2" width="16" height="16">
              <use xlink:href="#people-circle" />
            </svg>
            <span class="sidebar-text"> Add patients </span>
          </a>
        </li>
      </ul>
      <hr />
      <div class="dropdown">
        <a
          href="#"
          class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <img
            src="./img/me.JPG"
            alt=""
            width="32"
            height="32"
            class="rounded-circle me-2"
          />
          <strong class="sidebar-text">Ali Hassan</strong>
        </a>
        <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
          <li><a class="dropdown-item" href="#">New project...</a></li>
          <li><a class="dropdown-item" href="#">Settings</a></li>
          <li><a class="dropdown-item" href="#">Profile</a></li>
          <li><hr class="dropdown-divider" /></li>
          <li><a class="dropdown-item" href="/">Sign out</a></li>
        </ul>
      </div>
    </div>

      <div class="b-example-divider b-example-vr"></div>

      <section class="w-100">
        <nav class="navbar bg-body-tertiary">
          <div
            class="container-fluid justify-content-center justify-content-md-between"
          >
          <img src="/img/Zlhospital-removebg-preview_processed.png" alt="Example Image" width="90" height="90" />

            <a class="navbar-brand fw-medium fs-3 mb-1 mb-md-0">Zliten Medical Center</a>

            <img src="/img/Zlhospital-removebg-preview_processed.png" alt="Example Image" width="90" height="90" />
          </div>
        </nav>

        <div class="breadcrumb-info">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="/H">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">
                Editing: <%= obj.FirstName %> <%= obj.lastName %>
            </li>
          </ol>
        </nav>
          <p class="mb-0 mt-2"><span class="fw-medium">Patient ID:</span> <%= obj._id %></p>
        </div>
        
        <div class="wizard-container">
          <div class="wizard-header">
            <h2><i class="bi bi-pencil-square"></i> Edit Patient Information</h2>
            <p class="text-muted">Update patient information step by step</p>
          </div>
    
          <!-- Progress Steps -->
          <div class="progress-container">
            <div class="progress-steps">
              <div class="progress-bar-line" id="progressBar"></div>
              <div class="step-indicator active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Patient Info</div>
          </div>
              <div class="step-indicator" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Operation Info</div>
          </div>
              <div class="step-indicator" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Medical Staff</div>
          </div>
          </div>
          </div>
    
          <form action="/edit/<%= obj._id %>?_method=PUT" method="POST" id="patientForm">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">

            <!-- Step 1: Patient Information -->
            <div class="wizard-step active" id="step1">
              <h3 class="step-title"><i class="bi bi-person"></i> Patient Information</h3>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="inputfirstName4" class="form-label">First Name <span class="text-danger">*</span></label>
                  <input name="FirstName" value="<%= obj.FirstName %>" type="text" class="form-control" id="inputfirstName4" required />
                </div>
                <div class="col-md-6">
                  <label for="inputlastName4" class="form-label">Last Name <span class="text-danger">*</span></label>
                  <input name="lastName" value="<%= obj.lastName %>" type="text" class="form-control" id="inputlastName4" required />
                </div>
                <div class="col-md-6">
                  <label for="inputtele4" class="form-label">Telephone</label>
                  <input name="mobileNumber" value="<%= obj.mobileNumber %>" type="number" class="form-control" id="inputtele4" />
                </div>
                <div class="col-md-6">
                  <label for="inputage4" class="form-label">Age</label>
                  <input name="age" value="<%= obj.age %>" type="number" class="form-control" id="inputage4" />
                </div>
                <div class="col-md-6">
                  <label for="inputGender" class="form-label">Gender</label>
                  <select name="gender" id="inputGender" class="form-select">
                    <option hidden disabled>Choose here ...</option>
                    <option <%= obj.gender === "Male" ? "selected" : "" %>>Male</option>
                    <option <%= obj.gender === "Female" ? "selected" : "" %>>Female</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="inputCountry" class="form-label">Country</label>
                  <select name="country" id="inputCountry" class="form-select">
                    <option hidden disabled>Choose here ...</option>
                    <option <%= obj.country === "Morocco" ? "selected" : "" %>>Morocco</option>
                    <option <%= obj.country === "Egypt" ? "selected" : "" %>>Egypt</option>
                    <option <%= obj.country === "Algeria" ? "selected" : "" %>>Algeria</option>
                    <option <%= obj.country === "Bahrain" ? "selected" : "" %>>Bahrain</option>
                    <option <%= obj.country === "Comoros" ? "selected" : "" %>>Comoros</option>
                    <option <%= obj.country === "Djibouti" ? "selected" : "" %>>Djibouti</option>
                    <option <%= obj.country === "Iraq" ? "selected" : "" %>>Iraq</option>
                    <option <%= obj.country === "Jordan" ? "selected" : "" %>>Jordan</option>
                    <option <%= obj.country === "Kuwait" ? "selected" : "" %>>Kuwait</option>
                    <option <%= obj.country === "Lebanon" ? "selected" : "" %>>Lebanon</option>
                    <option <%= obj.country === "Libya" ? "selected" : "" %>>Libya</option>
                    <option <%= obj.country === "Mauritania" ? "selected" : "" %>>Mauritania</option>
                    <option <%= obj.country === "Oman" ? "selected" : "" %>>Oman</option>
                    <option <%= obj.country === "Palestine" ? "selected" : "" %>>Palestine</option>
                    <option <%= obj.country === "Qatar" ? "selected" : "" %>>Qatar</option>
                    <option <%= obj.country === "Saudi Arabia" ? "selected" : "" %>>Saudi Arabia</option>
                    <option <%= obj.country === "Somalia" ? "selected" : "" %>>Somalia</option>
                    <option <%= obj.country === "Sudan" ? "selected" : "" %>>Sudan</option>
                    <option <%= obj.country === "Syria" ? "selected" : "" %>>Syria</option>
                    <option <%= obj.country === "Tunisia" ? "selected" : "" %>>Tunisia</option>
                    <option <%= obj.country === "United Arab Emirates" ? "selected" : "" %>>United Arab Emirates</option>
                    <option <%= obj.country === "Yemen" ? "selected" : "" %>>Yemen</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="inputaddress" class="form-label">Address</label>
                  <input name="address" value="<%= obj.address %>" type="text" class="form-control" id="inputaddress" />
          </div>
                <div class="col-md-6">
                  <label for="inputbloodType" class="form-label">Blood Type</label>
                  <select class="form-select" id="inputbloodType" name="bloodType">
                    <option value="" disabled>Select blood type</option>
                    <option value="A+" <%= (obj.bloodType === "A+" || obj.blood_type === "A+") ? "selected" : "" %>>A+</option>
                    <option value="A-" <%= (obj.bloodType === "A-" || obj.blood_type === "A-") ? "selected" : "" %>>A-</option>
                    <option value="B+" <%= (obj.bloodType === "B+" || obj.blood_type === "B+") ? "selected" : "" %>>B+</option>
                    <option value="B-" <%= (obj.bloodType === "B-" || obj.blood_type === "B-") ? "selected" : "" %>>B-</option>
                    <option value="AB+" <%= (obj.bloodType === "AB+" || obj.blood_type === "AB+") ? "selected" : "" %>>AB+</option>
                    <option value="AB-" <%= (obj.bloodType === "AB-" || obj.blood_type === "AB-") ? "selected" : "" %>>AB-</option>
                    <option value="O+" <%= (obj.bloodType === "O+" || obj.blood_type === "O+") ? "selected" : "" %>>O+</option>
                    <option value="O-" <%= (obj.bloodType === "O-" || obj.blood_type === "O-") ? "selected" : "" %>>O-</option>
                  </select>
          </div>
                <div class="col-md-6">
                  <label for="inputfileNU" class="form-label">File Number</label>
                  <input name="fileNU" value="<%= obj.fileNU %>" type="number" class="form-control" id="inputfileNU" />
          </div>
                <div class="col-md-6">
                  <label for="inputAdmissionDate" class="form-label">Admission Date</label>
                  <input type="date" name="AdmissionDate" id="inputAdmissionDate" class="form-control" value="<%= obj.AdmissionDate ? new Date(obj.AdmissionDate).toISOString().split('T')[0] : '' %>" />
          </div>
            </div>
              <div class="wizard-buttons">
                <div></div>
                <button type="button" class="btn btn-primary btn-wizard" onclick="nextStep()">Next <i class="bi bi-arrow-right"></i></button>
          </div>
            </div>
          
            <!-- Step 2: Operation Information -->
            <div class="wizard-step" id="step2">
              <h3 class="step-title"><i class="bi bi-hospital"></i> Operation Information</h3>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="inputDepartment" class="form-label">Department <span class="text-danger">*</span></label>
                  <select class="form-select" id="inputDepartment" name="Department" required>
                    <option value="" disabled>Select Department</option>
                    <option value="General Surgery" <%= (obj.Department === "General Surgery" || obj.department === "General Surgery") ? "selected" : "" %>>General Surgery</option>
                    <option value="Orthopedics" <%= (obj.Department === "Orthopedics" || obj.department === "Orthopedics") ? "selected" : "" %>>Orthopedics</option>
                    <option value="ENT" <%= (obj.Department === "ENT" || obj.department === "ENT") ? "selected" : "" %>>ENT (Ear, Nose & Throat)</option>
                    <option value="Urology" <%= (obj.Department === "Urology" || obj.department === "Urology") ? "selected" : "" %>>Urology</option>
                    <option value="Plastic Surgery" <%= (obj.Department === "Plastic Surgery" || obj.department === "Plastic Surgery") ? "selected" : "" %>>Plastic Surgery</option>
                    <option value="Neurosurgery" <%= (obj.Department === "Neurosurgery" || obj.department === "Neurosurgery") ? "selected" : "" %>>Neurosurgery</option>
                    <option value="OB/GYN" <%= (obj.Department === "OB/GYN" || obj.department === "OB/GYN") ? "selected" : "" %>>OB/GYN (Obstetrics & Gynecology)</option>
                    <option value="Cardiothoracic Surgery" <%= (obj.Department === "Cardiothoracic Surgery" || obj.department === "Cardiothoracic Surgery") ? "selected" : "" %>>Cardiothoracic Surgery</option>
                    <option value="Ophthalmology" <%= (obj.Department === "Ophthalmology" || obj.department === "Ophthalmology") ? "selected" : "" %>>Ophthalmology</option>
                    <option value="Cardiology" <%= (obj.Department === "Cardiology" || obj.department === "Cardiology") ? "selected" : "" %>>Cardiology (Cardiac Catheterization)</option>
              </select>
            </div>
                <div class="col-md-6">
                  <label for="inputTypeofOperation" class="form-label">Type of Operation</label>
                  <input name="TypeofOperation" value="<%= obj.TypeofOperation %>" type="text" class="form-control" id="inputTypeofOperation" />
                </div>
                <div class="col-12">
                  <label for="diagnosis" class="form-label">Diagnosis</label>
                  <textarea class="form-control" id="diagnosis" name="diagnosis" rows="4" placeholder="Enter diagnosis details..."><%= obj.diagnosis %></textarea>
                </div>
                <div class="col-12">
                  <label for="notes" class="form-label">Notes</label>
                  <textarea class="form-control" id="notes" name="notes" rows="4" placeholder="Enter any additional notes..."><%= obj.notes %></textarea>
                </div>
              </div>
              <div class="wizard-buttons">
                <button type="button" class="btn btn-secondary btn-wizard" onclick="prevStep()"><i class="bi bi-arrow-left"></i> Previous</button>
                <button type="button" class="btn btn-primary btn-wizard" onclick="nextStep()">Next <i class="bi bi-arrow-right"></i></button>
              </div>
            </div>
          
            <!-- Step 3: Medical Staff -->
            <div class="wizard-step" id="step3">
              <h3 class="step-title"><i class="bi bi-people"></i> Medical Staff</h3>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="inputsurgeon" class="form-label">Surgeon Name</label>
                  <input name="surgeon" value="<%= obj.surgeon %>" type="text" class="form-control" id="inputsurgeon" />
                </div>
                <div class="col-md-6">
                  <label for="inputsurgeonAssistent1" class="form-label">Surgeon Assistant 1</label>
                  <input name="surgeonAssistent1" value="<%= obj.surgeonAssistent1 %>" type="text" class="form-control" id="inputsurgeonAssistent1" />
                </div>
                <div class="col-md-6">
                  <label for="inputsurgeonAssistent2" class="form-label">Surgeon Assistant 2</label>
                  <input name="surgeonAssistent2" value="<%= obj.surgeonAssistent2 %>" type="text" class="form-control" id="inputsurgeonAssistent2" />
                </div>
                <div class="col-md-6">
                  <label for="inputsurgeonAssistent3" class="form-label">Surgeon Assistant 3</label>
                  <input name="surgeonAssistent3" value="<%= obj.surgeonAssistent3 %>" type="text" class="form-control" id="inputsurgeonAssistent3" />
                </div>
                <div class="col-md-6">
                  <label for="inputtypeOfAnasthesia" class="form-label">Type of Anesthesia</label>
                  <input name="TypeOfAnasthesia" value="<%= obj.TypeOfAnasthesia %>" placeholder="Type Of Anesthesia" type="text" class="form-control" id="inputtypeOfAnasthesia" />
                </div>
                <div class="col-md-6">
                  <label for="inputAnasthesiologist1" class="form-label">Anesthesiologist 1</label>
                  <input name="Anasthesiologist1" value="<%= obj.Anasthesiologist1 %>" placeholder="Anesthesiologist 1" type="text" class="form-control" id="inputAnasthesiologist1" />
                </div>
                <div class="col-md-6">
                  <label for="inputAnasthesiologist2" class="form-label">Anesthesiologist 2</label>
                  <input name="Anasthesiologist2" value="<%= obj.Anasthesiologist2 %>" placeholder="Anesthesiologist 2" type="text" class="form-control" id="inputAnasthesiologist2" />
                </div>
                <div class="col-md-6">
                  <label for="inputAnasthesiaTechnia" class="form-label">Anesthesia Technician</label>
                  <input name="AnasthesiaTechnia" value="<%= obj.AnasthesiaTechnia %>" placeholder="Anesthesia Technician" type="text" class="form-control" id="inputAnasthesiaTechnia" />
          </div>
                <div class="col-md-6">
                  <label for="inputScrub1" class="form-label">Scrub 1</label>
                  <input name="Scrub1" value="<%= obj.Scrub1 %>" placeholder="Scrub 1" type="text" class="form-control" id="inputScrub1" />
        </div>
                <div class="col-md-6">
                  <label for="inputScrub2" class="form-label">Scrub 2</label>
                  <input name="Scrub2" value="<%= obj.Scrub2 %>" placeholder="Scrub 2" type="text" class="form-control" id="inputScrub2" />
          </div>
          </div>
              <div class="wizard-buttons">
                <button type="button" class="btn btn-secondary btn-wizard" onclick="prevStep()"><i class="bi bi-arrow-left"></i> Previous</button>
                <div>
                  <button type="submit" class="btn btn-success btn-wizard me-2"><i class="bi bi-check-circle"></i> Update Patient</button>
            <button
                    type="button"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
                    class="btn btn-danger btn-wizard"
            >
                    <i class="bi bi-trash"></i> Delete
            </button>
                </div>
              </div>
          </div>
        </form>
        </div>
      </section>
    
      <!-- Modal -->
      <div
        class="modal fade"
        id="exampleModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">
              Delete patient
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">Are you sure you want to continue deleting the patient?</div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal">
              Close
            </button>
            <form action="/delete/<%= obj._id %>?_method=DELETE" method="POST" class="mx-0">
              <input type="hidden" name="_csrf" value="<%= csrfToken %>">
              <button type="submit" class="btn btn-danger ms-2">
                Delete
              </button>
            </form>
          </div>
        </div>
      </div>
      
      </div>
    </main>
    <script src="../js/bootstrap.bundle.min.js"></script>
    
    <script src="../js/sidebars.js"></script>
    <script src="../js/main.js"></script>
    <script>
      let currentStep = 1;
      const totalSteps = 3;

      function updateProgress() {
        // Update progress bar
        const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
        document.getElementById('progressBar').style.width = progress + '%';

        // Update step indicators
        document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
          const stepNum = index + 1;
          indicator.classList.remove('active', 'completed');
          if (stepNum < currentStep) {
            indicator.classList.add('completed');
            indicator.querySelector('.step-circle').innerHTML = '<i class="bi bi-check"></i>';
          } else if (stepNum === currentStep) {
            indicator.classList.add('active');
            indicator.querySelector('.step-circle').innerHTML = stepNum;
          } else {
            indicator.querySelector('.step-circle').innerHTML = stepNum;
          }
        });
      }

      function showStep(step) {
        // Hide all steps
        document.querySelectorAll('.wizard-step').forEach(s => s.classList.remove('active'));
        
        // Show current step
        document.getElementById('step' + step).classList.add('active');
        
        currentStep = step;
        updateProgress();
      }

      function nextStep() {
        // Validate current step
        const currentStepElement = document.getElementById('step' + currentStep);
        const requiredFields = currentStepElement.querySelectorAll('[required]');
        let isValid = true;

        requiredFields.forEach(field => {
          if (!field.value.trim()) {
            isValid = false;
            field.classList.add('is-invalid');
          } else {
            field.classList.remove('is-invalid');
          }
        });

        if (!isValid) {
          alert('Please fill in all required fields before proceeding.');
          return;
        }

        if (currentStep < totalSteps) {
          showStep(currentStep + 1);
        }
      }

      function prevStep() {
        if (currentStep > 1) {
          showStep(currentStep - 1);
        }
      }

      // Initialize
      updateProgress();

      // Allow clicking on step indicators to navigate (optional)
      document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          const targetStep = index + 1;
          if (targetStep <= currentStep) {
            showStep(targetStep);
          }
        });
        indicator.style.cursor = 'pointer';
      });
    </script>
  </body>
</html>
